
## Анализ MVP продукта

### 1. Цель анализа

Настоящий документ подготовлен в рамках предварительного этапа разработки минимально жизнеспособного продукта (MVP) и направлен на прояснение его бизнес-ценности, формализацию ключевых пользовательских сценариев и определение системной структуры. Целью анализа является согласование ожиданий заинтересованных сторон, а также выявление потенциальных технических ограничений и точек роста, которые могут повлиять на дальнейшее развитие системы.

Анализ проводится до начала реализации, чтобы избежать дорогостоящих изменений архитектуры на поздних этапах и обеспечить фокус команды на наиболее значимых для пользователя функциях.

---

### 2. Описание продукта

Рассматриваемый MVP представляет собой сервис управления отзывами о различных организациях. Пользователи получают возможность оставлять отзывы, просматривать существующие, оценивать их полезность и, при необходимости, подавать жалобы. Основная цель MVP — собрать и структурировать обратную связь от пользователей, а также предоставить инструменты для анализа отзывов на уровне отдельных организаций и городов.

Продукт разрабатывается как часть более широкой экосистемы, в которой отзыв служит как информационным, так и репутационным инструментом. В MVP реализуются только базовые функции, необходимые для валидации пользовательского интереса и технологической состоятельности решения.

---

### 3. Бизнес-анализ

Потребность в системе обусловлена растущим запросом на прозрачность и достоверность информации об организациях в разных сферах — от образования и здравоохранения до сферы услуг. Пользователи, принимая решение о взаимодействии с той или иной организацией, всё чаще ориентируются на публичные отзывы и агрегированные оценки. Вместе с тем, организации заинтересованы в обратной связи, позволяющей улучшать качество предоставляемых услуг и выявлять проблемные зоны.

В рамках MVP предполагается охватить три основные категории пользователей:

- **Пользователь (гость или зарегистрированный):** ищет информацию о компаниях, оставляет отзывы, просматривает чужие мнения.
    
- **Организация (условно):** не участвует напрямую в MVP, но её поведение в дальнейшем может быть проанализировано на основе отзывов.
    

Ключевая бизнес-гипотеза MVP — пользователи будут регулярно обращаться к сервису за отзывами и оставлять собственные, если платформа будет удобной, быстрой и минимально загруженной лишними функциями. Успешность MVP будет измеряться в первую очередь количеством собранных отзывов, числом уникальных организаций и активностью чтения/поиска.
### 4. Основные пользовательские сценарии (обновлено)

MVP охватывает следующие ключевые сценарии использования:

- **Поиск организации и чтение отзывов.** Пользователь может найти интересующую организацию, просмотреть список отзывов, воспользоваться сортировками (по дате, релевантности и пр.). Это базовая точка входа в пользовательский путь.
    
- **Авторизация и создание отзывов.** Только авторизованные пользователи могут оставлять отзывы. При создании отзыва указывается заголовок, текст, оценка, а также, при необходимости, прикрепляются изображения. Также пользователь может создать ответ на отзыв, формируя дерево обсуждений.
    
- **Работа с вложениями.** Пользователь может прикрепить изображение к отзыву. Эти вложения сохраняются в подключённое хранилище (локальное или облачное), обрабатываются через сервис загрузки, а ссылки сохраняются в базе данных.
    
- **Получение собственных отзывов.** Авторизованный пользователь имеет доступ к своим отзывам и может их запрашивать через защищённый API. Функции редактирования или удаления в MVP могут быть ограничены.
    

Важно: в MVP не предусмотрена модерация и жалобы на отзывы. Все опубликованные отзывы отображаются «как есть», в соответствии с принципом минимального жизнеспособного продукта.
### 5. Системный контур MVP

Архитектура MVP выстроена вокруг принципа агрегатора, собирающего отзывы как от внутренних пользователей, так и от внешних подключённых систем. Ключевые компоненты:

#### Внутренние сервисы

- **chokak-server.** Ядро агрегатора отзывов, реализующее основную бизнес-логику: хранение, публикация, агрегирование отзывов, доступ к ним. Поддерживает как внутренние отзывы, так и синхронизацию с внешними источниками. Использует PostgreSQL в качестве основного хранилища.
    
- **chokak-gateway-server.** Гейтвей-сервер, через который происходит взаимодействие с API. Выступает фасадом над внутренними и внешними сервисами. Также занимается авторизацией запросов, используя Firebase.
    
- **chokak-cloud-storage.** Локальный сервис для хранения вложений (изображений и файлов). Используется в MVP в качестве простой замены облачного хранилища (например, AWS S3). В перспективе может быть отключён или заменён.
    

#### Интеграция с внешними сервисами

- **external-service-example.** Пример внешнего сервиса с отзывами, подключаемого к агрегатору. Поддерживает два режима:
    
    - подписка на Kafka-события от агрегатора (для синхронного получения отзывов);
        
    - собственное API, из которого агрегатор может периодически вытягивать отзывы.
        
- **Kafka и Zookeeper.** Используются для асинхронной интеграции между сервисами. Основной механизм — публикация событий при создании отзывов, на которые могут подписываться как внутренние, так и внешние сервисы.
    

#### Инфраструктурные компоненты

- **PostgreSQL.** Основное хранилище данных отзывов и пользователей.
    
- **Prometheus и Grafana.** Наблюдаемость за состоянием системы. Используются для мониторинга нагрузки, метрик активности пользователей и оценки отказоустойчивости в MVP.
    

#### Авторизация и безопасность

- Авторизация реализована через защищённый вход, и все действия по созданию отзывов или загрузке файлов доступны только авторизованным пользователям. Механизм может быть заменён или дополнен в будущем через SSO или OAuth-провайдеров.
## 6. Ограничения

1. **Отсутствие модерации и жалоб.**  
    Сервис не предусматривает предварительную или последующую модерацию отзывов, а также не поддерживает механизмов жалоб или блокировки нежелательного контента. Ответственность за качество и достоверность отзывов полностью лежит на внешних источниках или конечных пользователях.
    
2. **Отсутствие защиты от дублирующих отзывов.**  
    При публикации отзывов отсутствует механизм защиты от повторной отправки одного и того же отзыва (например, по причине сетевого таймаута на стороне клиента).
    
3. **Отсутствие редактирования опубликованных отзывов.**  
    Опубликованные отзывы являются неизменяемыми. Пользователь или внешний источник может лишь удалить отзыв, но не изменить его содержимое.
    
4. **Нет ограничений на частоту отправки отзывов.**  
    Сервис не реализует механизмов rate-limiting, CAPTCHA или других средств борьбы со спамом. Защита от злоупотреблений должна обеспечиваться внешними слоями или через API Gateway.
    

---

## 7. Выводы

Сервис отзывов реализован как самостоятельный компонент, интегрируемый в экосистему через Kafka и REST-интерфейсы. Архитектура построена в соответствии с принципами Clean Architecture, что обеспечивает чёткое разделение слоёв, тестируемость и устойчивость к изменениям.

Функционально сервис охватывает полный цикл работы с отзывами: от приёма и сохранения до агрегации и фильтрации по организациям. Возможность обогащения отзывов метаданными и расширяемость модели группировки и сортировки позволяют использовать сервис в сложных сценариях анализа пользовательского мнения.

В текущем виде сервис подходит для интеграции в MVP, а в перспективе может быть расширен за счёт добавления модерации, более жёсткой валидации и ограничений на уровне API.
